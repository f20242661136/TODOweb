{"ast":null,"code":"import React,{useState,useEffect}from'react';import{supabase}from'./supabaseClient';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[todos,setTodos]=useState([]);const[newTask,setNewTask]=useState('');useEffect(()=>{fetchTodos();// Set up real-time subscription\nconst subscription=supabase.channel('todos').on('postgres_changes',{event:'*',schema:'public',table:'todos'},payload=>{fetchTodos();// Refresh the list on any change\n}).subscribe();return()=>{supabase.removeChannel(subscription);};},[]);const fetchTodos=async()=>{const{data,error}=await supabase.from('todos').select('*').order('created_at',{ascending:false});if(error){console.error('Error fetching todos:',error);}else{setTodos(data);}};const addTodo=async()=>{if(newTask.trim()==='')return;const{error}=await supabase.from('todos').insert([{task:newTask,done:false}]);if(error){console.error('Error adding todo:',error);}else{setNewTask('');// fetchTodos(); // Not needed due to real-time subscription\n}};const toggleDone=async(id,done)=>{const{error}=await supabase.from('todos').update({done:!done}).eq('id',id);if(error){console.error('Error updating todo:',error);}// fetchTodos(); // Not needed due to real-time subscription\n};const deleteTodo=async id=>{const{error}=await supabase.from('todos').delete().eq('id',id);if(error){console.error('Error deleting todo:',error);}// fetchTodos(); // Not needed due to real-time subscription\n};const handleKeyPress=e=>{if(e.key==='Enter'){addTodo();}};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'600px',margin:'0 auto',padding:'20px',fontFamily:'Arial, sans-serif'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:'center',color:'#333'},children:\"To-Do App\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTask,onChange:e=>setNewTask(e.target.value),onKeyPress:handleKeyPress,placeholder:\"Enter a new task\",style:{width:'70%',padding:'10px',fontSize:'16px',border:'1px solid #ccc',borderRadius:'4px',marginRight:'10px'}}),/*#__PURE__*/_jsx(\"button\",{onClick:addTodo,style:{padding:'10px 20px',fontSize:'16px',backgroundColor:'#4CAF50',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"Add Task\"})]}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyleType:'none',padding:0},children:todos.map(todo=>/*#__PURE__*/_jsxs(\"li\",{style:{display:'flex',alignItems:'center',padding:'10px',border:'1px solid #ddd',borderRadius:'4px',marginBottom:'10px',backgroundColor:todo.done?'#f0f0f0':'#fff'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:todo.done,onChange:()=>toggleDone(todo.id,todo.done),style:{marginRight:'10px'}}),/*#__PURE__*/_jsx(\"span\",{style:{flexGrow:1,textDecoration:todo.done?'line-through':'none',color:todo.done?'#888':'#333'},children:todo.task}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteTodo(todo.id),style:{padding:'5px 10px',fontSize:'14px',backgroundColor:'#f44336',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',marginLeft:'10px'},children:\"Delete\"})]},todo.id))})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","supabase","jsx","_jsx","jsxs","_jsxs","App","todos","setTodos","newTask","setNewTask","fetchTodos","subscription","channel","on","event","schema","table","payload","subscribe","removeChannel","data","error","from","select","order","ascending","console","addTodo","trim","insert","task","done","toggleDone","id","update","eq","deleteTodo","delete","handleKeyPress","e","key","style","maxWidth","margin","padding","fontFamily","children","textAlign","color","marginBottom","type","value","onChange","target","onKeyPress","placeholder","width","fontSize","border","borderRadius","marginRight","onClick","backgroundColor","cursor","listStyleType","map","todo","display","alignItems","checked","flexGrow","textDecoration","marginLeft"],"sources":["D:/Rashid TODO/todo-app/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { supabase } from './supabaseClient';\r\n\r\nfunction App() {\r\n  const [todos, setTodos] = useState([]);\r\n  const [newTask, setNewTask] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchTodos();\r\n\r\n    // Set up real-time subscription\r\n    const subscription = supabase\r\n      .channel('todos')\r\n      .on('postgres_changes', { event: '*', schema: 'public', table: 'todos' }, (payload) => {\r\n        fetchTodos(); // Refresh the list on any change\r\n      })\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(subscription);\r\n    };\r\n  }, []);\r\n\r\n  const fetchTodos = async () => {\r\n    const { data, error } = await supabase\r\n      .from('todos')\r\n      .select('*')\r\n      .order('created_at', { ascending: false });\r\n\r\n    if (error) {\r\n      console.error('Error fetching todos:', error);\r\n    } else {\r\n      setTodos(data);\r\n    }\r\n  };\r\n\r\n  const addTodo = async () => {\r\n    if (newTask.trim() === '') return;\r\n\r\n    const { error } = await supabase\r\n      .from('todos')\r\n      .insert([{ task: newTask, done: false }]);\r\n\r\n    if (error) {\r\n      console.error('Error adding todo:', error);\r\n    } else {\r\n      setNewTask('');\r\n      // fetchTodos(); // Not needed due to real-time subscription\r\n    }\r\n  };\r\n\r\n  const toggleDone = async (id, done) => {\r\n    const { error } = await supabase\r\n      .from('todos')\r\n      .update({ done: !done })\r\n      .eq('id', id);\r\n\r\n    if (error) {\r\n      console.error('Error updating todo:', error);\r\n    }\r\n    // fetchTodos(); // Not needed due to real-time subscription\r\n  };\r\n\r\n  const deleteTodo = async (id) => {\r\n    const { error } = await supabase\r\n      .from('todos')\r\n      .delete()\r\n      .eq('id', id);\r\n\r\n    if (error) {\r\n      console.error('Error deleting todo:', error);\r\n    }\r\n    // fetchTodos(); // Not needed due to real-time subscription\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      addTodo();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: '600px', margin: '0 auto', padding: '20px', fontFamily: 'Arial, sans-serif' }}>\r\n      <h1 style={{ textAlign: 'center', color: '#333' }}>To-Do App</h1>\r\n\r\n      <div style={{ marginBottom: '20px' }}>\r\n        <input\r\n          type=\"text\"\r\n          value={newTask}\r\n          onChange={(e) => setNewTask(e.target.value)}\r\n          onKeyPress={handleKeyPress}\r\n          placeholder=\"Enter a new task\"\r\n          style={{\r\n            width: '70%',\r\n            padding: '10px',\r\n            fontSize: '16px',\r\n            border: '1px solid #ccc',\r\n            borderRadius: '4px',\r\n            marginRight: '10px'\r\n          }}\r\n        />\r\n        <button\r\n          onClick={addTodo}\r\n          style={{\r\n            padding: '10px 20px',\r\n            fontSize: '16px',\r\n            backgroundColor: '#4CAF50',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '4px',\r\n            cursor: 'pointer'\r\n          }}\r\n        >\r\n          Add Task\r\n        </button>\r\n      </div>\r\n\r\n      <ul style={{ listStyleType: 'none', padding: 0 }}>\r\n        {todos.map((todo) => (\r\n          <li\r\n            key={todo.id}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              padding: '10px',\r\n              border: '1px solid #ddd',\r\n              borderRadius: '4px',\r\n              marginBottom: '10px',\r\n              backgroundColor: todo.done ? '#f0f0f0' : '#fff'\r\n            }}\r\n          >\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={todo.done}\r\n              onChange={() => toggleDone(todo.id, todo.done)}\r\n              style={{ marginRight: '10px' }}\r\n            />\r\n            <span\r\n              style={{\r\n                flexGrow: 1,\r\n                textDecoration: todo.done ? 'line-through' : 'none',\r\n                color: todo.done ? '#888' : '#333'\r\n              }}\r\n            >\r\n              {todo.task}\r\n            </span>\r\n            <button\r\n              onClick={() => deleteTodo(todo.id)}\r\n              style={{\r\n                padding: '5px 10px',\r\n                fontSize: '14px',\r\n                backgroundColor: '#f44336',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '4px',\r\n                cursor: 'pointer',\r\n                marginLeft: '10px'\r\n              }}\r\n            >\r\n              Delete\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}